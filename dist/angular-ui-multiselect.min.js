!function(){"use strict";function a(a,b,c,d){var e=this;e.$onInit=function(){var b={},d={selectionLimit:1,searchLimit:25,selectedDisplayLimit:5,unselectedDisplayLimit:10,defaultText:"Select",idProp:"id",displayProp:"display",bindId:!0,showSearch:!1,showSelectAll:!1,showUnselectAll:!1,containerClass:"multiselect-container",toggleClass:"multiselect-toggle",dropdownClass:"multiselect-dropdown",searchClass:"multiselect-search",disabled:!1,formElement:""};angular.extend(b,d,e.options),e.options=b,e.searchFilter="",e.selectedDisplayIndex=0,e.unselectedDisplayIndex=0,e.resolvedItems=[],e.ngModel.$render=m,e.ngModel.$viewChangeListeners.push(m),e.ngModel.$isEmpty=i,e.selectedItemsWatcher=a.$watch("vm.selectedItems",q,!0),e.itemsWatcher=a.$watch("vm.items",r,!0),c.on("click",g),c.on("wheel",h),e.toggleDropdown=f,e.toggleItem=w,e.addItem=n,e.getButtonText=s,e.getId=x,e.getDisplay=y,e.update=t,e.selectAll=u,e.unselectAll=v,e.unselectedPageUp=z,e.unselectedPageDown=A,e.selectedPageUp=C,e.selectedPageDown=D,o()},e.$onDestroy=function(){c.off("wheel",h),c.off("click",g),e.selectedItemsWatcher&&e.selectedItemsWatcher(),e.itemsWatcher&&e.itemsWatcher()};var f=function(){e.open=!e.open},g=function(c){b[0].contains(c.target)||a.$apply(function(){e.open=!1})},h=function(b){var c=b.originalEvent||b,d=function(){return c.stopPropagation(),c.preventDefault(),!1};if(e.open&&e.isMouseOver){var f=c.deltaY>0;if(f){if(D(1)||A(1))return a.$apply(function(){k()}),d()}else if(z(1)||C(1))return a.$apply(function(){k()}),d()}},i=function(a){return a&&angular.isArray(a)?0===a.length:!!a},j=function(){var a=0;return function(b){if(a>e.options.searchLimit)return!1;var c=e.getDisplay(b);if(c){var d=c.toLowerCase().indexOf(e.searchFilter.toLowerCase())>-1;return d&&a++,d}}},k=function(a){a&&(e.selectedDisplayIndex=0,e.unselectedDisplayIndex=0),e.selectedItemsView=e.selectedItems.slice(e.selectedDisplayIndex,e.selectedDisplayIndex+e.options.selectedDisplayLimit),0===e.selectedItemsView.length&&e.selectedDisplayIndex>0&&C(),e.unselectedItemsFiltered=d("filter")(e.unselectedItems,j()),e.unselectedItemsView=e.unselectedItemsFiltered.slice(e.unselectedDisplayIndex,e.unselectedDisplayIndex+e.options.unselectedDisplayLimit),0===e.unselectedItemsView.length&&e.unselectedDisplayIndex>0&&z(),l()},l=function(){e.hasUnselectedPageDown=e.unselectedItemsFiltered.length>e.options.unselectedDisplayLimit,e.canUnselectedPageDown=e.unselectedDisplayIndex+e.options.unselectedDisplayLimit<e.unselectedItemsFiltered.length,e.hasUnselectedPageUp=e.unselectedItemsFiltered.length>e.options.unselectedDisplayLimit,e.canUnselectedPageUp=e.unselectedDisplayIndex>0,e.hasSelectedPageDown=e.selectedItems.length>e.options.selectedDisplayLimit,e.canSelectedPageDown=e.selectedDisplayIndex+e.options.selectedDisplayLimit<e.selectedItems.length,e.hasSelectedPageUp=e.selectedItems.length>e.options.selectedDisplayLimit,e.canSelectedPageUp=e.selectedDisplayIndex>0,e.canSelectItem=!(e.options.selectionLimit&&e.options.selectionLimit>1&&e.selectedItems.length>=e.options.selectionLimit)},m=function(){0!==e.resolvedItems.length&&(e.ngModel.$viewValue?(e.selectedItems=e.resolvedItems.filter(function(a){var b=e.getId(a),c=void 0;if(angular.isArray(e.ngModel.$viewValue))for(var d=0;d<e.ngModel.$viewValue.length;d++){var c=e.getId(e.ngModel.$viewValue[d]);if(b===c)return!0}else if(c=e.getId(e.ngModel.$viewValue),b===c)return!0;return!1}),e.unselectedItems=e.resolvedItems.filter(function(a){return e.selectedItems.indexOf(a)<0})):(e.selectedItems=[],e.unselectedItems=e.resolvedItems.slice()),k(!0))},n=function(a,b){e.resolvedItems.push(a),b&&p([a].concat(e.selectedItems)),m()},o=function(){e.resolvedItems=[],e.items&&("function"==typeof e.items?e.items().then(function(a){e.resolvedItems=a,m()}):(e.resolvedItems=e.items,m()))},p=function(a){var b=void 0;b=1===e.options.selectionLimit?e.options.bindId?e.getId(a[0]):a[0]:e.options.bindId?a.map(function(a){return e.getId(a)}):angular.copy(a),e.ngModel.$setViewValue(b)},q=function(a,b){angular.equals(a,b)||p(a)},r=function(a,b){angular.equals(a,b)||o()},s=function(){if(e.selectedItems&&1===e.selectedItems.length)return e.getDisplay(e.selectedItems[0]);if(e.selectedItems&&e.selectedItems.length>1){var a;return a=angular.isDefined(e.selectedItems)?e.selectedItems.length:0,0===a?e.options.defaultText:a+" selected"}return e.options.defaultText},t=function(){k(!0)},u=function(){e.selectedItems=e.resolvedItems.slice(),e.unselectedItems=[],k(!0)},v=function(){e.selectedItems=[],e.unselectedItems=e.resolvedItems.slice(),k(!0)},w=function(a){var b=e.selectedItems.indexOf(a),c=-1!==b;if(c&&(0===e.options.selectionLimit||e.options.selectionLimit>1))e.unselectedItems.push(e.selectedItems[b]),e.selectedItems.splice(b,1);else if(!c&&(0===e.options.selectionLimit||e.selectedItems.length<e.options.selectionLimit)){var d=e.unselectedItems.indexOf(a);e.unselectedItems.splice(d,1),e.selectedItems.push(a)}else if(!c&&1===e.options.selectionLimit){var d=e.unselectedItems.indexOf(a);e.unselectedItems.splice(d,1),e.selectedItems.splice(0,1),e.selectedItems.push(a),e.toggleDropdown()}k()},x=function(a){return angular.isObject(a)?e.options.idProp?F(a,e.options.idProp):($log.error("Multiselect: when using objects as model, a idProp value is mandatory."),""):a},y=function(a){return angular.isObject(a)?e.options.displayProp?F(a,e.options.displayProp):($log.error("Multiselect: when using objects as model, a displayProp value is mandatory."),""):a},z=function(a){a=a||e.options.unselectedDisplayLimit;var b=e.unselectedDisplayIndex-a;return b=b>0?b:0,e.canUnselectedPageUp&&B(b)},A=function(a){a=a||e.options.unselectedDisplayLimit;var b=e.unselectedItemsFiltered.length,c=e.unselectedDisplayIndex+a;return c=b>c?c:b-e.options.unselectedDisplayLimit-1,e.canUnselectedPageDown&&B(c)},B=function(a){return e.unselectedDisplayIndex!==a?(e.unselectedDisplayIndex=a,k(),!0):!1},C=function(a){a=a||e.options.selectedDisplayLimit;var b=e.selectedDisplayIndex-a;return b=b>0?b:0,e.canSelectedPageUp&&E(b)},D=function(a){a=a||e.options.selectedDisplayLimit;var b=e.selectedItems.length,c=e.selectedDisplayIndex+a;return c=b>c?c:b-e.options.selectedDisplayLimit-1,e.canSelectedPageDown&&E(c)},E=function(a){return e.selectedDisplayIndex!==a?(e.selectedDisplayIndex=a,k(),!0):!1},F=function(a,b){return b.split(".").reduce(function(a,b){return a?a[b]:null},a)}}function b(){var a=this;a.$onInit=function(){var b=a.uiMultiselectController.options,c=!!a.itemSelected;if(a.itemId&&a.itemDisplay&&b.idProp&&b.displayProp){var d={};d[b.idProp]=a.itemId,d[b.displayProp]=a.itemDisplay,a.uiMultiselectController.addItem(d,c)}else a.itemId?a.uiMultiselectController.addItem(a.itemId,c):a.itemDisplay&&a.uiMultiselectController.addItem(a.itemDisplay,c)}}angular.module("ui.multiselect",["ui.multiselect.templates"]).component("uiMultiselect",{controller:a,controllerAs:"vm",templateUrl:"multiselect.html",transclude:!0,bindings:{items:"=",options:"="},require:{ngModel:"ngModel"}}).component("uiItem",{controller:b,controllerAs:"vm",bindings:{itemId:"@",itemDisplay:"@",itemSelected:"@"},require:{uiMultiselectController:"^uiMultiselect"}}),a.$inject=["$scope","$element","$document","$filter"],b.$inject=[]}(),angular.module("ui.multiselect.templates",["multiselect.html"]),angular.module("multiselect.html",[]).run(["$templateCache",function(a){a.put("multiselect.html",'<input id="{{vm.options.formElement}}" name="{{vm.options.formElement}}" hidden="hidden" ng-model="vm.ngModel.$viewValue" ng-if="vm.options.formElement"/>\n<div class="{{::vm.options.containerClass}}">\n    <button type="button" class="{{::vm.options.toggleClass}}" ng-click="vm.toggleDropdown()" ng-disabled="vm.options.disabled">\n        {{vm.getButtonText()}}&nbsp;<span class="caret"></span>\n    </button>\n    <ul class="{{::vm.options.dropdownClass}}" ng-show="vm.open" style="display:block"\n        ng-mouseenter="vm.isMouseOver = true" ng-mouseleave="vm.isMouseOver = false">\n\n        <li ng-show="vm.options.showSelectAll">\n            <a ng-click="vm.selectAll()" href="">\n                <span class="glyphicon glyphicon-ok"></span> Select All\n            </a>\n        </li>\n        <li ng-show="vm.options.showUnselectAll">\n            <a ng-click="vm.unselectAll()" href="">\n                <span class="glyphicon glyphicon-remove"></span> Unselect All\n            </a>\n        </li>\n        <li ng-show="(vm.options.showSelectAll || vm.options.showUnselectAll)" class="divider">\n        </li>\n\n        <li ng-if="vm.hasSelectedPageUp" ng-class="{disabled: !vm.canSelectedPageUp}">\n            <a href="" ng-click="vm.selectedPageUp(); $event.stopPropagation()" class="text-center">\n                <span class="glyphicon glyphicon-chevron-up"></span>\n            </a>\n        </li>\n        <li role="presentation" ng-repeat="item in vm.selectedItemsView" class="active">\n            <a class="item-selected" href="" ng-click="vm.toggleItem(item); $event.stopPropagation()">\n                <span class="glyphicon glyphicon-remove" ng-if="vm.options.selectionLimit !== 1"></span> {{vm.getDisplay(item)}}\n            </a>\n        </li>\n        <li ng-if="vm.hasSelectedPageDown" ng-class="{disabled: !vm.canSelectedPageDown}">\n            <a href="" ng-click="vm.selectedPageDown(); $event.stopPropagation()" class="text-center">\n                <span class="glyphicon glyphicon-chevron-down"></span>\n            </a>\n        </li>\n        <li ng-show="vm.selectedItems.length > 0" class="divider"></li>\n\n        <li ng-show="vm.options.showSearch && vm.unselectedItems.length > 0">\n            <div class="dropdown-header">\n                <input type="text" class="{{::vm.options.searchClass}}" ng-model="vm.searchFilter" placeholder="Search..." ng-change="vm.update()" />\n            </div>\n        </li>\n        <li ng-show="vm.options.showSearch && vm.unselectedItems.length > 0" class="divider"></li>\n        \n        <li ng-if="vm.hasUnselectedPageUp" ng-class="{disabled: !vm.canUnselectedPageUp}">\n            <a href="" ng-click="vm.unselectedPageUp(); $event.stopPropagation()" class="text-center">\n                <span class="glyphicon glyphicon-chevron-up"></span>\n            </a>\n        </li>\n        <li role="presentation" ng-repeat="item in vm.unselectedItemsView" ng-class="{disabled : !vm.canSelectItem}">\n            <a class="item-unselected" href="" ng-click="vm.toggleItem(item); $event.stopPropagation()">\n                {{vm.getDisplay(item)}}\n            </a>\n        </li>\n        <li ng-if="vm.hasUnselectedPageDown" ng-class="{disabled: !vm.canUnselectedPageDown}">\n            <a href="" ng-click="vm.unselectedPageDown(); $event.stopPropagation()" class="text-center">\n                <span class="glyphicon glyphicon-chevron-down"></span>\n            </a>\n        </li>\n\n        <li class="divider" ng-show="vm.options.selectionLimit > 1"></li>\n        <li role="presentation" ng-show="vm.options.selectionLimit > 1">\n            <a>{{vm.selectedItems.length || 0}} / {{vm.options.selectionLimit}} selected</a>\n        </li>\n    </ul>\n</div>\n<div ng-show="false" ng-transclude></div>')}]);