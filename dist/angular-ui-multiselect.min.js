!function(a){"use strict";function b(b,c,d,e,f){function g(){H.open=!H.open}function h(a){c[0].contains(a.target)||b.$apply(function(){H.open=!1})}function i(a){var c=a.originalEvent||a,d=function(){return c.stopPropagation(),c.preventDefault(),!1};if(H.open&&H.isMouseOver){var e=c.deltaY>0;if(e){if(E(1)||B(1))return b.$apply(function(){l()}),d()}else if(A(1)||D(1))return b.$apply(function(){l()}),d()}}function j(b){return b&&a.isArray(b)?0===b.length:!!b}function k(){var a=0;return function(b){if(0!==H.options.searchLimit&&a>H.options.searchLimit)return!1;var c=H.getDisplay(b);if(c){var d=c.toLowerCase().indexOf(H.searchFilter.toLowerCase())>-1;return d&&a++,d}}}function l(a){a&&(H.selectedDisplayIndex=0,H.unselectedDisplayIndex=0),H.selectedItemsView=H.selectedItems.slice(H.selectedDisplayIndex,H.selectedDisplayIndex+H.options.selectedDisplayLimit),0===H.selectedItemsView.length&&H.selectedDisplayIndex>0&&D(),H.unselectedItemsFiltered=e("filter")(H.unselectedItems,k()),H.unselectedItemsView=H.unselectedItemsFiltered.slice(H.unselectedDisplayIndex,H.unselectedDisplayIndex+H.options.unselectedDisplayLimit),0===H.unselectedItemsView.length&&H.unselectedDisplayIndex>0&&A(),m()}function m(){H.hasUnselectedPageDown=H.unselectedItemsFiltered.length>H.options.unselectedDisplayLimit,H.canUnselectedPageDown=H.unselectedDisplayIndex+H.options.unselectedDisplayLimit<H.unselectedItemsFiltered.length,H.hasUnselectedPageUp=H.unselectedItemsFiltered.length>H.options.unselectedDisplayLimit,H.canUnselectedPageUp=H.unselectedDisplayIndex>0,H.hasSelectedPageDown=H.selectedItems.length>H.options.selectedDisplayLimit,H.canSelectedPageDown=H.selectedDisplayIndex+H.options.selectedDisplayLimit<H.selectedItems.length,H.hasSelectedPageUp=H.selectedItems.length>H.options.selectedDisplayLimit,H.canSelectedPageUp=H.selectedDisplayIndex>0,H.canSelectItem=!(H.options.selectionLimit&&H.options.selectionLimit>1&&H.selectedItems.length>=H.options.selectionLimit),H.hasMultipleSelection=1!==H.options.selectionLimit}function n(){0!==H.resolvedItems.length&&(H.ngModel.$viewValue?(H.selectedItems=H.resolvedItems.filter(function(b){var c,d=H.getId(b);if(a.isArray(H.ngModel.$viewValue)){for(var e=0;e<H.ngModel.$viewValue.length;e++)if(c=H.getId(H.ngModel.$viewValue[e]),d===c)return!0}else if(c=H.getId(H.ngModel.$viewValue),d===c)return!0;return!1}),H.unselectedItems=H.resolvedItems.filter(function(a){return H.selectedItems.indexOf(a)<0})):(H.selectedItems=[],H.unselectedItems=H.resolvedItems.slice()),l(!0))}function o(a,b){H.resolvedItems.push(a),b&&q([a].concat(H.selectedItems)),n()}function p(){H.resolvedItems=[],H.items&&("function"==typeof H.items?H.items().then(function(a){H.resolvedItems=a,n()}):(H.resolvedItems=H.items,n()))}function q(b){var c;c=1===H.options.selectionLimit?H.options.bindId?H.getId(b[0]):b[0]:H.options.bindId?b.map(function(a){return H.getId(a)}):a.copy(b),H.ngModel.$setViewValue(c)}function r(b,c){a.equals(b,c)||q(b)}function s(b,c){a.equals(b,c)||p()}function t(){if(H.selectedItems&&1===H.selectedItems.length)return H.getDisplay(H.selectedItems[0]);if(H.selectedItems&&H.selectedItems.length>1){var b;return b=a.isDefined(H.selectedItems)?H.selectedItems.length:0,0===b?H.options.defaultText:b+" selected"}return H.options.defaultText}function u(){l(!0)}function v(){H.selectedItems=H.resolvedItems.slice(),H.unselectedItems=[],l(!0)}function w(){H.selectedItems=[],H.unselectedItems=H.resolvedItems.slice(),l(!0)}function x(a){var b,c=H.selectedItems.indexOf(a),d=-1!==c;d&&(0===H.options.selectionLimit||H.options.selectionLimit>1)?(H.unselectedItems.push(H.selectedItems[c]),H.selectedItems.splice(c,1)):!d&&(0===H.options.selectionLimit||H.selectedItems.length<H.options.selectionLimit)?(b=H.unselectedItems.indexOf(a),H.unselectedItems.splice(b,1),H.selectedItems.push(a)):d||1!==H.options.selectionLimit||(b=H.unselectedItems.indexOf(a),H.unselectedItems.splice(b,1),H.selectedItems.splice(0,1),H.selectedItems.push(a),H.toggleDropdown()),l()}function y(b){return a.isObject(b)?H.options.idProp?G(b,H.options.idProp):(f.error("Multiselect: when using objects as model, a idProp value is mandatory."),""):b}function z(b){return a.isObject(b)?H.options.displayProp?G(b,H.options.displayProp):(f.error("Multiselect: when using objects as model, a displayProp value is mandatory."),""):b}function A(a){a=a||H.options.unselectedDisplayLimit;var b=H.unselectedDisplayIndex-a;return b=b>0?b:0,H.canUnselectedPageUp&&C(b)}function B(a){a=a||H.options.unselectedDisplayLimit;var b=H.unselectedItemsFiltered.length,c=H.unselectedDisplayIndex+a;return c=b>c?c:b-H.options.unselectedDisplayLimit-1,H.canUnselectedPageDown&&C(c)}function C(a){return H.unselectedDisplayIndex!==a?(H.unselectedDisplayIndex=a,l(),!0):!1}function D(a){a=a||H.options.selectedDisplayLimit;var b=H.selectedDisplayIndex-a;return b=b>0?b:0,H.canSelectedPageUp&&F(b)}function E(a){a=a||H.options.selectedDisplayLimit;var b=H.selectedItems.length,c=H.selectedDisplayIndex+a;return c=b>c?c:b-H.options.selectedDisplayLimit-1,H.canSelectedPageDown&&F(c)}function F(a){return H.selectedDisplayIndex!==a?(H.selectedDisplayIndex=a,l(),!0):!1}function G(a,b){return b.split(".").reduce(function(a,b){return a?a[b]:null},a)}var H=this;H.$onInit=function(){var c={selectionLimit:1,searchLimit:0,selectedDisplayLimit:5,unselectedDisplayLimit:10,defaultText:"Select",idProp:"id",displayProp:"display",bindId:!0,showSearch:!1,showSelectAll:!1,showUnselectAll:!1,containerClass:"multiselect-container",toggleClass:"multiselect-toggle",dropdownClass:"multiselect-dropdown",searchClass:"multiselect-search",disabled:!1,formElement:""};H.userOptions&&a.extend(c,H.userOptions),H.options=c,H.searchFilter="",H.selectedDisplayIndex=0,H.unselectedDisplayIndex=0,H.resolvedItems=[],H.ngModel.$render=n,H.ngModel.$viewChangeListeners.push(n),H.ngModel.$isEmpty=j,H.selectedItemsWatcher=b.$watch("vm.selectedItems",r,!0),H.itemsWatcher=b.$watch("vm.items",s,!0),d.on("click",h),d.on("wheel",i),H.toggleDropdown=g,H.toggleItem=x,H.addItem=o,H.getButtonText=t,H.getId=y,H.getDisplay=z,H.update=u,H.selectAll=v,H.unselectAll=w,H.unselectedPageUp=A,H.unselectedPageDown=B,H.selectedPageUp=D,H.selectedPageDown=E,p()},H.$onDestroy=function(){d.off("wheel",i),d.off("click",h),H.selectedItemsWatcher&&H.selectedItemsWatcher(),H.itemsWatcher&&H.itemsWatcher()}}function c(){var a=this;a.$onInit=function(){var b=a.uiMultiselectController.options,c=!!a.itemSelected;if(a.itemId&&a.itemDisplay&&b.idProp&&b.displayProp){var d={};d[b.idProp]=a.itemId,d[b.displayProp]=a.itemDisplay,a.uiMultiselectController.addItem(d,c)}else a.itemId?a.uiMultiselectController.addItem(a.itemId,c):a.itemDisplay&&a.uiMultiselectController.addItem(a.itemDisplay,c)}}a.module("ui.multiselect",["ui.multiselect.templates"]).component("uiMultiselect",{controller:b,controllerAs:"vm",templateUrl:"multiselect.html",transclude:!0,bindings:{items:"=",userOptions:"<?options"},require:{ngModel:"ngModel"}}).component("uiItem",{controller:c,controllerAs:"vm",bindings:{itemId:"@",itemDisplay:"@",itemSelected:"@"},require:{uiMultiselectController:"^uiMultiselect"}}),b.$inject=["$scope","$element","$document","$filter","$log"],c.$inject=[]}(angular),angular.module("ui.multiselect.templates",["multiselect.html"]),angular.module("multiselect.html",[]).run(["$templateCache",function(a){a.put("multiselect.html",'<select id="{{vm.options.formElement}}" name="{{vm.options.formElement}}" hidden="hidden" ng-if="vm.options.formElement && vm.hasMultipleSelection" multiple>\n    <option ng-repeat="item in vm.selectedItems" value="{{vm.getId(item)}}" selected>{{vm.getDisplay(item)}}</option>\n</select>\n<select id="{{vm.options.formElement}}" name="{{vm.options.formElement}}" hidden="hidden" ng-if="vm.options.formElement && !vm.hasMultipleSelection">\n    <option ng-repeat="item in vm.selectedItems" value="{{vm.getId(item)}}" selected>{{vm.getDisplay(item)}}</option>\n</select>\n<div class="{{::vm.options.containerClass}}">\n    <button type="button" class="{{::vm.options.toggleClass}}" ng-click="vm.toggleDropdown()" ng-disabled="vm.options.disabled">\n        {{vm.getButtonText()}}&nbsp;<span class="caret"></span>\n    </button>\n    <ul class="{{::vm.options.dropdownClass}}" ng-show="vm.open" style="display:block"\n        ng-mouseenter="vm.isMouseOver = true" ng-mouseleave="vm.isMouseOver = false">\n\n        <li ng-show="vm.options.showSelectAll">\n            <a ng-click="vm.selectAll()" href="">\n                <span class="glyphicon glyphicon-ok"></span> Select All\n            </a>\n        </li>\n        <li ng-show="vm.options.showUnselectAll">\n            <a ng-click="vm.unselectAll()" href="">\n                <span class="glyphicon glyphicon-remove"></span> Unselect All\n            </a>\n        </li>\n        <li ng-show="(vm.options.showSelectAll || vm.options.showUnselectAll)" class="divider">\n        </li>\n\n        <li ng-if="vm.hasSelectedPageUp" ng-class="{disabled: !vm.canSelectedPageUp}">\n            <a href="" ng-click="vm.selectedPageUp(); $event.stopPropagation()" class="text-center">\n                <span class="glyphicon glyphicon-chevron-up"></span>\n            </a>\n        </li>\n        <li role="presentation" ng-repeat="item in vm.selectedItemsView" class="active">\n            <a class="item-selected" href="" ng-click="vm.toggleItem(item); $event.stopPropagation()">\n                <span class="glyphicon glyphicon-remove" ng-if="vm.options.selectionLimit !== 1"></span> {{vm.getDisplay(item)}}\n            </a>\n        </li>\n        <li ng-if="vm.hasSelectedPageDown" ng-class="{disabled: !vm.canSelectedPageDown}">\n            <a href="" ng-click="vm.selectedPageDown(); $event.stopPropagation()" class="text-center">\n                <span class="glyphicon glyphicon-chevron-down"></span>\n            </a>\n        </li>\n        <li ng-show="vm.selectedItems.length > 0" class="divider"></li>\n\n        <li ng-show="vm.options.showSearch && vm.unselectedItems.length > 0">\n            <div class="dropdown-header">\n                <input type="text" class="{{::vm.options.searchClass}}" ng-model="vm.searchFilter" placeholder="Search..." ng-change="vm.update()" />\n            </div>\n        </li>\n        <li ng-show="vm.options.showSearch && vm.unselectedItems.length > 0" class="divider"></li>\n        \n        <li ng-if="vm.hasUnselectedPageUp" ng-class="{disabled: !vm.canUnselectedPageUp}">\n            <a href="" ng-click="vm.unselectedPageUp(); $event.stopPropagation()" class="text-center">\n                <span class="glyphicon glyphicon-chevron-up"></span>\n            </a>\n        </li>\n        <li role="presentation" ng-repeat="item in vm.unselectedItemsView" ng-class="{disabled : !vm.canSelectItem}">\n            <a class="item-unselected" href="" ng-click="vm.toggleItem(item); $event.stopPropagation()">\n                {{vm.getDisplay(item)}}\n            </a>\n        </li>\n        <li ng-if="vm.hasUnselectedPageDown" ng-class="{disabled: !vm.canUnselectedPageDown}">\n            <a href="" ng-click="vm.unselectedPageDown(); $event.stopPropagation()" class="text-center">\n                <span class="glyphicon glyphicon-chevron-down"></span>\n            </a>\n        </li>\n\n        <li class="divider" ng-show="vm.options.selectionLimit > 1"></li>\n        <li role="presentation" ng-show="vm.options.selectionLimit > 1">\n            <a>{{vm.selectedItems.length || 0}} / {{vm.options.selectionLimit}} selected</a>\n        </li>\n    </ul>\n</div>\n<div ng-show="false" ng-transclude></div>')}]);