!function(){"use strict";function a(a,b,c,d){var e=this;e.$onInit=function(){var b={},d={selectionLimit:0,searchLimit:25,selectedDisplayLimit:5,unselectedDisplayLimit:10,defaultText:"Select",bindId:!1,containerClass:"multiselect-container",toggleClass:"multiselect-toggle",dropdownClass:"multiselect-dropdown",searchClass:"multiselect-search",disabled:!1,formElement:""};angular.extend(b,d,e.options),e.options=b,e.searchFilter="",e.selectedDisplayIndex=0,e.unselectedDisplayIndex=0,e.resolvedItems=[],c.on("click",g),e.ngModel.$render=l,e.ngModel.$viewChangeListeners.push(l),e.ngModel.$isEmpty=h,e.selectedItemsWatcher=a.$watch("selectedItems",p,!0),e.itemsWatcher=a.$watch("items",q,!0),e.toggleDropdown=f,e.toggleItem=v,e.addItem=m,e.getButtonText=r,e.getId=w,e.getDisplay=x,e.update=s,e.selectAll=t,e.unselectAll=u,e.unselectedPageUp=y,e.unselectedPageDown=z,e.selectedPageUp=A,e.selectedPageDown=B,n()},e.$onDestroy=function(){c.off("click",g),e.selectedItemsWatcher&&e.selectedItemsWatcher(),e.itemsWatcher&&e.itemsWatcher()};var f=function(){e.open=!e.open},g=function(c){b[0].contains(c.target)||a.$apply(function(){e.open=!1})},h=function(a){return a&&angular.isArray(a)?0===a.length:!!a},i=function(){var a=0;return function(b){if(a>e.options.searchLimit)return!1;var c=e.getDisplay(b);if(c){var d=c.toLowerCase().indexOf(e.searchFilter.toLowerCase())>-1;return d&&a++,d}}},j=function(a){a&&(e.selectedDisplayIndex=0,e.unselectedDisplayIndex=0),e.selectedItemsView=e.selectedItems.slice(e.selectedDisplayIndex,e.selectedDisplayIndex+e.options.selectedDisplayLimit),0===e.selectedItemsView.length&&e.selectedDisplayIndex>0&&A(),e.unselectedItemsFiltered=d("filter")(e.unselectedItems,i()),e.unselectedItemsView=e.unselectedItemsFiltered.slice(e.unselectedDisplayIndex,e.unselectedDisplayIndex+e.options.unselectedDisplayLimit),0===e.unselectedItemsView.length&&e.unselectedDisplayIndex>0&&y(),k()},k=function(){e.hasUnselectedPageDown=e.unselectedItemsFiltered.length>e.options.unselectedDisplayLimit,e.canUnselectedPageDown=e.unselectedDisplayIndex+e.options.unselectedDisplayLimit<e.unselectedItemsFiltered.length,e.hasUnselectedPageUp=e.unselectedItemsFiltered.length>e.options.unselectedDisplayLimit,e.canUnselectedPageUp=e.unselectedDisplayIndex>0,e.hasSelectedPageDown=e.selectedItems.length>e.options.selectedDisplayLimit,e.canSelectedPageDown=e.selectedDisplayIndex+e.options.selectedDisplayLimit<e.selectedItems.length,e.hasSelectedPageUp=e.selectedItems.length>e.options.selectedDisplayLimit,e.canSelectedPageUp=e.selectedDisplayIndex>0,e.canSelectItem=!(e.options.selectionLimit&&e.options.selectionLimit>1&&e.selectedItems.length>=e.options.selectionLimit)},l=function(){0!==e.resolvedItems.length&&(e.ngModel.$viewValue?(e.selectedItems=e.resolvedItems.filter(function(a){var b=e.getId(a),c=void 0;if(angular.isArray(e.ngModel.$viewValue))for(var d=0;d<e.ngModel.$viewValue.length;d++){var c=e.getId(e.ngModel.$viewValue[d]);if(b===c)return!0}else if(c=e.getId(e.ngModel.$viewValue),b===c)return!0;return!1}),e.unselectedItems=e.resolvedItems.filter(function(a){return e.selectedItems.indexOf(a)<0})):(e.selectedItems=[],e.unselectedItems=e.resolvedItems.slice()),j(!0))},m=function(a,b){e.resolvedItems.push(a),b&&o([a].concat(e.selectedItems)),l()},n=function(){e.resolvedItems=[],e.items&&("function"==typeof e.items?e.items().then(function(a){e.resolvedItems=a,l()}):(e.resolvedItems=e.items,l()))},o=function(a){var b=void 0;b=1===e.options.selectionLimit?e.options.bindId?e.getId(a[0]):a[0]:e.options.bindId?a.map(function(a){return e.getId(a)}):angular.copy(a),e.ngModel.$setViewValue(b)},p=function(a,b){angular.equals(a,b)||o(a)},q=function(a,b){angular.equals(a,b)||n()},r=function(){if(e.selectedItems&&1===e.selectedItems.length)return e.getDisplay(e.selectedItems[0]);if(e.selectedItems&&e.selectedItems.length>1){var a;return a=angular.isDefined(e.selectedItems)?e.selectedItems.length:0,0===a?e.options.defaultText:a+" selected"}return e.options.defaultText},s=function(){j(!0)},t=function(){e.selectedItems=e.resolvedItems.slice(),e.unselectedItems=[],j(!0)},u=function(){e.selectedItems=[],e.unselectedItems=e.resolvedItems.slice(),j(!0)},v=function(a){var b=e.selectedItems.indexOf(a),c=-1!==b;if(c&&(0===e.options.selectionLimit||e.options.selectionLimit>1))e.unselectedItems.push(e.selectedItems[b]),e.selectedItems.splice(b,1);else if(!c&&(0===e.options.selectionLimit||e.selectedItems.length<e.options.selectionLimit)){var d=e.unselectedItems.indexOf(a);e.unselectedItems.splice(d,1),e.selectedItems.push(a)}else if(!c&&1===e.options.selectionLimit){var d=e.unselectedItems.indexOf(a);e.unselectedItems.splice(d,1),e.selectedItems.splice(0,1),e.selectedItems.push(a),e.toggleDropdown()}j()},w=function(a){return angular.isObject(a)?e.options.idProp?C(a,e.options.idProp):($log.error("Multiselect: when using objects as model, a idProp value is mandatory."),""):a},x=function(a){return angular.isObject(a)?e.options.displayProp?C(a,e.options.displayProp):($log.error("Multiselect: when using objects as model, a displayProp value is mandatory."),""):a},y=function(){var a=e.unselectedDisplayIndex-e.options.unselectedDisplayLimit;e.unselectedDisplayIndex=a>0?a:0,j()},z=function(){var a=e.unselectedItemsFiltered.length,b=e.unselectedDisplayIndex+e.options.unselectedDisplayLimit;e.unselectedDisplayIndex=a>b?b:a-e.options.unselectedDisplayLimit-1,j()},A=function(){var a=e.selectedDisplayIndex-e.options.selectedDisplayLimit;e.selectedDisplayIndex=a>0?a:0,j()},B=function(){var a=e.selectedItems.length,b=e.selectedDisplayIndex+e.options.selectedDisplayLimit;e.selectedDisplayIndex=a>b?b:a-e.options.selectedDisplayLimit-1,j()},C=function(a,b){return b.split(".").reduce(function(a,b){return a?a[b]:null},a)}}function b(){var a=this;a.$onInit=function(){var b=a.uiMultiselectController.options,c=!!a.itemSelected;if(a.itemId&&a.itemDisplay&&b.idProp&&b.displayProp){var d={};d[b.idProp]=a.itemId,d[b.displayProp]=a.itemDisplay,a.uiMultiselectController.addItem(d,c)}else a.itemId?a.uiMultiselectController.addItem(a.itemId,c):a.itemDisplay&&a.uiMultiselectController.addItem(a.itemDisplay,c)}}angular.module("ui.multiselect",["ui.multiselect.templates"]).component("uiMultiselect",{controller:a,controllerAs:"vm",templateUrl:"multiselect.html",transclude:!0,bindings:{items:"=",options:"="},require:{ngModel:"ngModel"}}).component("uiItem",{controller:b,controllerAs:"vm",bindings:{itemId:"@",itemDisplay:"@",itemSelected:"@"},require:{uiMultiselectController:"^uiMultiselect"}}),a.$inject=["$scope","$element","$document","$filter"],b.$inject=[]}(),angular.module("ui.multiselect.templates",["multiselect.html"]),angular.module("multiselect.html",[]).run(["$templateCache",function(a){a.put("multiselect.html",'<input name="{{vm.options.formElement}}" hidden="hidden" ng-model="vm.ngModel.$viewValue" ng-if="vm.options.formElement"/>\n<div class="{{::vm.options.containerClass}}">\n    <button type="button" class="{{::vm.options.toggleClass}}" ng-click="vm.toggleDropdown()" ng-disabled="vm.options.disabled">\n        {{vm.getButtonText()}}&nbsp;<span class="caret"></span>\n    </button>\n    <ul class="{{::vm.options.dropdownClass}}" ng-show="vm.open" style="display:block">\n\n        <li ng-show="vm.options.showSelectAll">\n            <a ng-click="vm.selectAll()" href="">\n                <span class="glyphicon glyphicon-ok"></span> Select All\n            </a>\n        </li>\n        <li ng-show="vm.options.showUnselectAll">\n            <a ng-click="vm.unselectAll()" href="">\n                <span class="glyphicon glyphicon-remove"></span> Unselect All\n            </a>\n        </li>\n        <li ng-show="(vm.options.showSelectAll || vm.options.showUnselectAll)" class="divider">\n        </li>\n\n        <li ng-if="vm.hasSelectedPageUp" ng-class="{disabled: !vm.canSelectedPageUp}">\n            <a href="" ng-click="vm.selectedPageUp(); $event.stopPropagation()" class="text-center">\n                <span class="glyphicon glyphicon-chevron-up"></span>\n            </a>\n        </li>\n        <li role="presentation" ng-repeat="item in vm.selectedItemsView" class="active">\n            <a class="item-selected" href="" ng-click="vm.toggleItem(item); $event.stopPropagation()">\n                <span class="glyphicon glyphicon-remove" ng-if="vm.options.selectionLimit !== 1"></span> {{vm.getDisplay(item)}}\n            </a>\n        </li>\n        <li ng-if="vm.hasSelectedPageDown" ng-class="{disabled: !vm.canSelectedPageDown}">\n            <a href="" ng-click="vm.selectedPageDown(); $event.stopPropagation()" class="text-center">\n                <span class="glyphicon glyphicon-chevron-down"></span>\n            </a>\n        </li>\n        <li ng-show="vm.selectedItems.length > 0" class="divider"></li>\n\n        <li ng-show="vm.options.showSearch && vm.unselectedItems.length > 0">\n            <div class="dropdown-header">\n                <input type="text" class="{{::vm.options.searchClass}}" ng-model="vm.searchFilter" placeholder="Search..." ng-change="vm.update()" />\n            </div>\n        </li>\n        <li ng-show="vm.options.showSearch && vm.unselectedItems.length > 0" class="divider"></li>\n        \n        <li ng-if="vm.hasUnselectedPageUp" ng-class="{disabled: !vm.canUnselectedPageUp}">\n            <a href="" ng-click="vm.unselectedPageUp(); $event.stopPropagation()" class="text-center">\n                <span class="glyphicon glyphicon-chevron-up"></span>\n            </a>\n        </li>\n        <li role="presentation" ng-repeat="item in vm.unselectedItemsView" ng-class="{disabled : !vm.canSelectItem}">\n            <a class="item-unselected" href="" ng-click="vm.toggleItem(item); $event.stopPropagation()">\n                {{vm.getDisplay(item)}}\n            </a>\n        </li>\n        <li ng-if="vm.hasUnselectedPageDown" ng-class="{disabled: !vm.canUnselectedPageDown}">\n            <a href="" ng-click="vm.unselectedPageDown(); $event.stopPropagation()" class="text-center">\n                <span class="glyphicon glyphicon-chevron-down"></span>\n            </a>\n        </li>\n\n        <li class="divider" ng-show="vm.options.selectionLimit > 1"></li>\n        <li role="presentation" ng-show="vm.options.selectionLimit > 1">\n            <a>{{vm.selectedItems.length || 0}} / {{vm.options.selectionLimit}} selected</a>\n        </li>\n    </ul>\n</div>\n<div ng-show="false" ng-transclude></div>')}]);