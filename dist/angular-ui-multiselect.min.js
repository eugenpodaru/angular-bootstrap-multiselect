!function(){"use strict";function a(a,b,c,d,e){var f=this;f.$onInit=function(){var b={selectionLimit:1,searchLimit:25,selectedDisplayLimit:5,unselectedDisplayLimit:10,defaultText:"Select",idProp:"id",displayProp:"display",bindId:!0,showSearch:!1,showSelectAll:!1,showUnselectAll:!1,containerClass:"multiselect-container",toggleClass:"multiselect-toggle",dropdownClass:"multiselect-dropdown",searchClass:"multiselect-search",disabled:!1,formElement:""};f.userOptions&&angular.extend(b,f.userOptions),f.options=b,f.searchFilter="",f.selectedDisplayIndex=0,f.unselectedDisplayIndex=0,f.resolvedItems=[],f.ngModel.$render=n,f.ngModel.$viewChangeListeners.push(n),f.ngModel.$isEmpty=j,f.selectedItemsWatcher=a.$watch("vm.selectedItems",r,!0),f.itemsWatcher=a.$watch("vm.items",s,!0),c.on("click",h),c.on("wheel",i),f.toggleDropdown=g,f.toggleItem=x,f.addItem=o,f.getButtonText=t,f.getId=y,f.getDisplay=z,f.update=u,f.selectAll=v,f.unselectAll=w,f.unselectedPageUp=A,f.unselectedPageDown=B,f.selectedPageUp=D,f.selectedPageDown=E,p()},f.$onDestroy=function(){c.off("wheel",i),c.off("click",h),f.selectedItemsWatcher&&f.selectedItemsWatcher(),f.itemsWatcher&&f.itemsWatcher()};var g=function(){f.open=!f.open},h=function(c){b[0].contains(c.target)||a.$apply(function(){f.open=!1})},i=function(b){var c=b.originalEvent||b,d=function(){return c.stopPropagation(),c.preventDefault(),!1};if(f.open&&f.isMouseOver){var e=c.deltaY>0;if(e){if(E(1)||B(1))return a.$apply(function(){l()}),d()}else if(A(1)||D(1))return a.$apply(function(){l()}),d()}},j=function(a){return a&&angular.isArray(a)?0===a.length:!!a},k=function(){var a=0;return function(b){if(a>f.options.searchLimit)return!1;var c=f.getDisplay(b);if(c){var d=c.toLowerCase().indexOf(f.searchFilter.toLowerCase())>-1;return d&&a++,d}}},l=function(a){a&&(f.selectedDisplayIndex=0,f.unselectedDisplayIndex=0),f.selectedItemsView=f.selectedItems.slice(f.selectedDisplayIndex,f.selectedDisplayIndex+f.options.selectedDisplayLimit),0===f.selectedItemsView.length&&f.selectedDisplayIndex>0&&D(),f.unselectedItemsFiltered=d("filter")(f.unselectedItems,k()),f.unselectedItemsView=f.unselectedItemsFiltered.slice(f.unselectedDisplayIndex,f.unselectedDisplayIndex+f.options.unselectedDisplayLimit),0===f.unselectedItemsView.length&&f.unselectedDisplayIndex>0&&A(),m()},m=function(){f.hasUnselectedPageDown=f.unselectedItemsFiltered.length>f.options.unselectedDisplayLimit,f.canUnselectedPageDown=f.unselectedDisplayIndex+f.options.unselectedDisplayLimit<f.unselectedItemsFiltered.length,f.hasUnselectedPageUp=f.unselectedItemsFiltered.length>f.options.unselectedDisplayLimit,f.canUnselectedPageUp=f.unselectedDisplayIndex>0,f.hasSelectedPageDown=f.selectedItems.length>f.options.selectedDisplayLimit,f.canSelectedPageDown=f.selectedDisplayIndex+f.options.selectedDisplayLimit<f.selectedItems.length,f.hasSelectedPageUp=f.selectedItems.length>f.options.selectedDisplayLimit,f.canSelectedPageUp=f.selectedDisplayIndex>0,f.canSelectItem=!(f.options.selectionLimit&&f.options.selectionLimit>1&&f.selectedItems.length>=f.options.selectionLimit),f.hasMultipleSelection=1!==f.options.selectionLimit},n=function(){0!==f.resolvedItems.length&&(f.ngModel.$viewValue?(f.selectedItems=f.resolvedItems.filter(function(a){var b=f.getId(a),c=void 0;if(angular.isArray(f.ngModel.$viewValue))for(var d=0;d<f.ngModel.$viewValue.length;d++){var c=f.getId(f.ngModel.$viewValue[d]);if(b===c)return!0}else if(c=f.getId(f.ngModel.$viewValue),b===c)return!0;return!1}),f.unselectedItems=f.resolvedItems.filter(function(a){return f.selectedItems.indexOf(a)<0})):(f.selectedItems=[],f.unselectedItems=f.resolvedItems.slice()),l(!0))},o=function(a,b){f.resolvedItems.push(a),b&&q([a].concat(f.selectedItems)),n()},p=function(){f.resolvedItems=[],f.items&&("function"==typeof f.items?f.items().then(function(a){f.resolvedItems=a,n()}):(f.resolvedItems=f.items,n()))},q=function(a){var b=void 0;b=1===f.options.selectionLimit?f.options.bindId?f.getId(a[0]):a[0]:f.options.bindId?a.map(function(a){return f.getId(a)}):angular.copy(a),f.ngModel.$setViewValue(b)},r=function(a,b){angular.equals(a,b)||q(a)},s=function(a,b){angular.equals(a,b)||p()},t=function(){if(f.selectedItems&&1===f.selectedItems.length)return f.getDisplay(f.selectedItems[0]);if(f.selectedItems&&f.selectedItems.length>1){var a;return a=angular.isDefined(f.selectedItems)?f.selectedItems.length:0,0===a?f.options.defaultText:a+" selected"}return f.options.defaultText},u=function(){l(!0)},v=function(){f.selectedItems=f.resolvedItems.slice(),f.unselectedItems=[],l(!0)},w=function(){f.selectedItems=[],f.unselectedItems=f.resolvedItems.slice(),l(!0)},x=function(a){var b=f.selectedItems.indexOf(a),c=-1!==b;if(c&&(0===f.options.selectionLimit||f.options.selectionLimit>1))f.unselectedItems.push(f.selectedItems[b]),f.selectedItems.splice(b,1);else if(!c&&(0===f.options.selectionLimit||f.selectedItems.length<f.options.selectionLimit)){var d=f.unselectedItems.indexOf(a);f.unselectedItems.splice(d,1),f.selectedItems.push(a)}else if(!c&&1===f.options.selectionLimit){var d=f.unselectedItems.indexOf(a);f.unselectedItems.splice(d,1),f.selectedItems.splice(0,1),f.selectedItems.push(a),f.toggleDropdown()}l()},y=function(a){return angular.isObject(a)?f.options.idProp?G(a,f.options.idProp):(e.error("Multiselect: when using objects as model, a idProp value is mandatory."),""):a},z=function(a){return angular.isObject(a)?f.options.displayProp?G(a,f.options.displayProp):(e.error("Multiselect: when using objects as model, a displayProp value is mandatory."),""):a},A=function(a){a=a||f.options.unselectedDisplayLimit;var b=f.unselectedDisplayIndex-a;return b=b>0?b:0,f.canUnselectedPageUp&&C(b)},B=function(a){a=a||f.options.unselectedDisplayLimit;var b=f.unselectedItemsFiltered.length,c=f.unselectedDisplayIndex+a;return c=b>c?c:b-f.options.unselectedDisplayLimit-1,f.canUnselectedPageDown&&C(c)},C=function(a){return f.unselectedDisplayIndex!==a?(f.unselectedDisplayIndex=a,l(),!0):!1},D=function(a){a=a||f.options.selectedDisplayLimit;var b=f.selectedDisplayIndex-a;return b=b>0?b:0,f.canSelectedPageUp&&F(b)},E=function(a){a=a||f.options.selectedDisplayLimit;var b=f.selectedItems.length,c=f.selectedDisplayIndex+a;return c=b>c?c:b-f.options.selectedDisplayLimit-1,f.canSelectedPageDown&&F(c)},F=function(a){return f.selectedDisplayIndex!==a?(f.selectedDisplayIndex=a,l(),!0):!1},G=function(a,b){return b.split(".").reduce(function(a,b){return a?a[b]:null},a)}}function b(){var a=this;a.$onInit=function(){var b=a.uiMultiselectController.options,c=!!a.itemSelected;if(a.itemId&&a.itemDisplay&&b.idProp&&b.displayProp){var d={};d[b.idProp]=a.itemId,d[b.displayProp]=a.itemDisplay,a.uiMultiselectController.addItem(d,c)}else a.itemId?a.uiMultiselectController.addItem(a.itemId,c):a.itemDisplay&&a.uiMultiselectController.addItem(a.itemDisplay,c)}}angular.module("ui.multiselect",["ui.multiselect.templates"]).component("uiMultiselect",{controller:a,controllerAs:"vm",templateUrl:"multiselect.html",transclude:!0,bindings:{items:"=",userOptions:"<?options"},require:{ngModel:"ngModel"}}).component("uiItem",{controller:b,controllerAs:"vm",bindings:{itemId:"@",itemDisplay:"@",itemSelected:"@"},require:{uiMultiselectController:"^uiMultiselect"}}),a.$inject=["$scope","$element","$document","$filter","$log"],b.$inject=[]}(),angular.module("ui.multiselect.templates",["multiselect.html"]),angular.module("multiselect.html",[]).run(["$templateCache",function(a){a.put("multiselect.html",'<select id="{{vm.options.formElement}}" name="{{vm.options.formElement}}" hidden="hidden" ng-if="vm.options.formElement && vm.hasMultipleSelection" multiple>\n    <option ng-repeat="item in vm.selectedItems" value="{{vm.getId(item)}}" selected>{{vm.getDisplay(item)}}</option>\n</select>\n<select id="{{vm.options.formElement}}" name="{{vm.options.formElement}}" hidden="hidden" ng-if="vm.options.formElement && !vm.hasMultipleSelection">\n    <option ng-repeat="item in vm.selectedItems" value="{{vm.getId(item)}}" selected>{{vm.getDisplay(item)}}</option>\n</select>\n<div class="{{::vm.options.containerClass}}">\n    <button type="button" class="{{::vm.options.toggleClass}}" ng-click="vm.toggleDropdown()" ng-disabled="vm.options.disabled">\n        {{vm.getButtonText()}}&nbsp;<span class="caret"></span>\n    </button>\n    <ul class="{{::vm.options.dropdownClass}}" ng-show="vm.open" style="display:block"\n        ng-mouseenter="vm.isMouseOver = true" ng-mouseleave="vm.isMouseOver = false">\n\n        <li ng-show="vm.options.showSelectAll">\n            <a ng-click="vm.selectAll()" href="">\n                <span class="glyphicon glyphicon-ok"></span> Select All\n            </a>\n        </li>\n        <li ng-show="vm.options.showUnselectAll">\n            <a ng-click="vm.unselectAll()" href="">\n                <span class="glyphicon glyphicon-remove"></span> Unselect All\n            </a>\n        </li>\n        <li ng-show="(vm.options.showSelectAll || vm.options.showUnselectAll)" class="divider">\n        </li>\n\n        <li ng-if="vm.hasSelectedPageUp" ng-class="{disabled: !vm.canSelectedPageUp}">\n            <a href="" ng-click="vm.selectedPageUp(); $event.stopPropagation()" class="text-center">\n                <span class="glyphicon glyphicon-chevron-up"></span>\n            </a>\n        </li>\n        <li role="presentation" ng-repeat="item in vm.selectedItemsView" class="active">\n            <a class="item-selected" href="" ng-click="vm.toggleItem(item); $event.stopPropagation()">\n                <span class="glyphicon glyphicon-remove" ng-if="vm.options.selectionLimit !== 1"></span> {{vm.getDisplay(item)}}\n            </a>\n        </li>\n        <li ng-if="vm.hasSelectedPageDown" ng-class="{disabled: !vm.canSelectedPageDown}">\n            <a href="" ng-click="vm.selectedPageDown(); $event.stopPropagation()" class="text-center">\n                <span class="glyphicon glyphicon-chevron-down"></span>\n            </a>\n        </li>\n        <li ng-show="vm.selectedItems.length > 0" class="divider"></li>\n\n        <li ng-show="vm.options.showSearch && vm.unselectedItems.length > 0">\n            <div class="dropdown-header">\n                <input type="text" class="{{::vm.options.searchClass}}" ng-model="vm.searchFilter" placeholder="Search..." ng-change="vm.update()" />\n            </div>\n        </li>\n        <li ng-show="vm.options.showSearch && vm.unselectedItems.length > 0" class="divider"></li>\n        \n        <li ng-if="vm.hasUnselectedPageUp" ng-class="{disabled: !vm.canUnselectedPageUp}">\n            <a href="" ng-click="vm.unselectedPageUp(); $event.stopPropagation()" class="text-center">\n                <span class="glyphicon glyphicon-chevron-up"></span>\n            </a>\n        </li>\n        <li role="presentation" ng-repeat="item in vm.unselectedItemsView" ng-class="{disabled : !vm.canSelectItem}">\n            <a class="item-unselected" href="" ng-click="vm.toggleItem(item); $event.stopPropagation()">\n                {{vm.getDisplay(item)}}\n            </a>\n        </li>\n        <li ng-if="vm.hasUnselectedPageDown" ng-class="{disabled: !vm.canUnselectedPageDown}">\n            <a href="" ng-click="vm.unselectedPageDown(); $event.stopPropagation()" class="text-center">\n                <span class="glyphicon glyphicon-chevron-down"></span>\n            </a>\n        </li>\n\n        <li class="divider" ng-show="vm.options.selectionLimit > 1"></li>\n        <li role="presentation" ng-show="vm.options.selectionLimit > 1">\n            <a>{{vm.selectedItems.length || 0}} / {{vm.options.selectionLimit}} selected</a>\n        </li>\n    </ul>\n</div>\n<div ng-show="false" ng-transclude></div>')}]);